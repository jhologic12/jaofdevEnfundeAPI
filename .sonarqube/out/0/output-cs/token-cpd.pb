‚
)C:\jaofdev\EnfudeAPI\EnfudeAPI\Program.cs
	namespace 	

EnfundeAPI
 
{ 
public 

static 
class 
Program 
{ 
public 
static 
async 
Task  
Main! %
(% &
string& ,
[, -
]- .
args/ 3
)3 4
{ 	
var 
builder 
= 
WebApplication (
.( )
CreateBuilder) 6
(6 7
args7 ;
); <
;< =
builder		 
.		 
Services		 
.		 
AddControllers		 +
(		+ ,
)		, -
;		- .
builder

 
.

 
Services

 
.

 
AddSwaggerGen

 *
(

* +
)

+ ,
;

, -
var 
app 
= 
builder 
. 
Build #
(# $
)$ %
;% &
if 
( 
app 
. 
Environment 
.  
IsDevelopment  -
(- .
). /
)/ 0
{ 
app 
. 

UseSwagger 
( 
)  
;  !
app 
. 
UseSwaggerUI  
(  !
)! "
;" #
} 
app 
. 
UseHttpsRedirection #
(# $
)$ %
;% &
app 
. 
UseAuthorization  
(  !
)! "
;" #
app 
. 
MapControllers 
( 
)  
;  !
await 
app 
. 
RunAsync 
( 
)  
;  !
} 	
} 
} ²
9C:\jaofdev\EnfudeAPI\EnfudeAPI\Domain\Entities\Usuario.cs
	namespace 	

EnfundeAPI
 
. 
Domain 
. 
Entities $
{ 
public 

class 
Usuario 
{ 
public 
Guid 
Id 
{ 
get 
; 
private %
set& )
;) *
}+ ,
=- .
Guid/ 3
.3 4
NewGuid4 ;
(; <
)< =
;= >
public

 
string

 
Nombre

 
{

 
get

 "
;

" #
private

$ +
set

, /
;

/ 0
}

1 2
=

3 4
string

5 ;
.

; <
Empty

< A
;

A B
public 
string 
Correo 
{ 
get "
;" #
private$ +
set, /
;/ 0
}1 2
=3 4
string5 ;
.; <
Empty< A
;A B
public 
string 
Rol 
{ 
get 
;  
private! (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 
bool 
Activo 
{ 
get  
;  !
private" )
set* -
;- .
}/ 0
=1 2
true3 7
;7 8
public 
ICollection 
< 
Racimo !
>! "
EnfundesRealizados# 5
{6 7
get8 ;
;; <
private= D
setE H
;H I
}J K
=L M
newN Q
ListR V
<V W
RacimoW ]
>] ^
(^ _
)_ `
;` a
public 
ICollection 
< 
Racimo !
>! "
CosechasRealizadas# 5
{6 7
get8 ;
;; <
private= D
setE H
;H I
}J K
=L M
newN Q
ListR V
<V W
RacimoW ]
>] ^
(^ _
)_ `
;` a
	protected 
Usuario 
( 
) 
{ 
} 
public 
Usuario 
( 
string 
nombre $
,$ %
string& ,
correo- 3
,3 4
string5 ;
rol< ?
)? @
{ 	
Nombre 
= 
nombre 
; 
Correo 
= 
correo 
; 
Rol 
= 
rol 
; 
} 	
public 
void 

Desactivar 
( 
)  
=>! #
Activo$ *
=+ ,
false- 2
;2 3
public 
void 
Activar 
( 
) 
=>  
Activo! '
=( )
true* .
;. /
} 
} ²&
8C:\jaofdev\EnfudeAPI\EnfudeAPI\Domain\Entities\Racimo.cs
	namespace 	

EnfundeAPI
 
. 
Domain 
. 
Entities $
{ 
public 

class 
Racimo 
{ 
public 
Guid 
Id 
{ 
get 
; 
private %
set& )
;) *
}+ ,
=- .
Guid/ 3
.3 4
NewGuid4 ;
(; <
)< =
;= >
public 
Guid 
LoteId 
{ 
get  
;  !
private" )
set* -
;- .
}/ 0
public		 
DateTime		 
FechaEnfunde		 $
{		% &
get		' *
;		* +
private		, 3
set		4 7
;		7 8
}		9 :
=		; <
DateTime		= E
.		E F
UtcNow		F L
;		L M
public

 
string

 

ColorCinta

  
{

! "
get

# &
;

& '
private

( /
set

0 3
;

3 4
}

5 6
=

7 8
string

9 ?
.

? @
Empty

@ E
;

E F
public 
string 
Estado 
{ 
get "
;" #
private$ +
set, /
;/ 0
}1 2
=3 4
$str5 >
;> ?
public 
DateTime 
? 
FechaCosecha %
{& '
get( +
;+ ,
private- 4
set5 8
;8 9
}: ;
public 
Guid 
? 
OperarioEnfundeId &
{' (
get) ,
;, -
private. 5
set6 9
;9 :
}; <
public 
Guid 
? 
OperarioCosechaId &
{' (
get) ,
;, -
private. 5
set6 9
;9 :
}; <
public 
Lote 
Lote 
{ 
get 
; 
private  '
set( +
;+ ,
}- .
=/ 0
null1 5
!5 6
;6 7
public 
Usuario 
OperarioEnfunde &
{' (
get) ,
;, -
private. 5
set6 9
;9 :
}; <
== >
null? C
!C D
;D E
public 
Usuario 
OperarioCosecha &
{' (
get) ,
;, -
private. 5
set6 9
;9 :
}; <
== >
null? C
!C D
;D E
	protected 
Racimo 
( 
) 
{ 
} 
public 
Racimo 
( 
Guid 
loteId !
,! "
DateTime# +
fechaEnfunde, 8
,8 9
string: @

colorCintaA K
,K L
GuidM Q
operarioEnfundeIdR c
)c d
{ 	
LoteId 
= 
loteId 
; 
FechaEnfunde 
= 
fechaEnfunde '
;' (

ColorCinta 
= 

colorCinta #
;# $
Estado 
= 
$str 
; 
OperarioEnfundeId 
= 
operarioEnfundeId  1
;1 2
} 	
public   
int   
EdadSemanas   
=>   !
(  " #
int  # &
)  & '
Math  ' +
.  + ,
Floor  , 1
(  1 2
(  2 3
DateTime  3 ;
.  ; <
UtcNow  < B
-  C D
FechaEnfunde  E Q
)  Q R
.  R S
	TotalDays  S \
/  ] ^
$num  _ `
)  ` a
;  a b
public"" 
void"" 
MarcarListo"" 
(""  
)""  !
{## 	
if$$ 
($$ 
Estado$$ 
==$$ 
$str$$ #
&&$$$ &
EdadSemanas$$' 2
>=$$3 5
$num$$6 8
)$$8 9
Estado%% 
=%% 
$str%%  
;%%  !
}&& 	
public(( 
void(( 
RegistrarCosecha(( $
((($ %
DateTime((% -
fechaCosecha((. :
,((: ;
Guid((< @
operarioCosechaId((A R
)((R S
{)) 	
FechaCosecha** 
=** 
fechaCosecha** '
;**' (
OperarioCosechaId++ 
=++ 
operarioCosechaId++  1
;++1 2
Estado,, 
=,, 
$str,,  
;,,  !
}-- 	
}.. 
}// ¯
6C:\jaofdev\EnfudeAPI\EnfudeAPI\Domain\Entities\Lote.cs
	namespace 	

EnfundeAPI
 
. 
Domain 
. 
Entities $
{ 
public 

class 
Lote 
{ 
public 
Guid 
Id 
{ 
get 
; 
private %
set& )
;) *
}+ ,
=- .
Guid/ 3
.3 4
NewGuid4 ;
(; <
)< =
;= >
public		 
string		 
Nombre		 
{		 
get		 "
;		" #
private		$ +
set		, /
;		/ 0
}		1 2
=		3 4
string		5 ;
.		; <
Empty		< A
;		A B
public

 
string

 
	Ubicacion

 
{

  !
get

" %
;

% &
private

' .
set

/ 2
;

2 3
}

4 5
=

6 7
string

8 >
.

> ?
Empty

? D
;

D E
public 
int 
AreaM2 
{ 
get 
;  
private! (
set) ,
;, -
}. /
public 
string 
Responsable !
{" #
get$ '
;' (
private) 0
set1 4
;4 5
}6 7
=8 9
string: @
.@ A
EmptyA F
;F G
public 
ICollection 
< 
Racimo !
>! "
Racimos# *
{+ ,
get- 0
;0 1
private2 9
set: =
;= >
}? @
=A B
newC F
ListG K
<K L
RacimoL R
>R S
(S T
)T U
;U V
	protected 
Lote 
( 
) 
{ 
} 
public 
Lote 
( 
string 
nombre !
,! "
string# )
	ubicacion* 3
,3 4
int5 8
areaM29 ?
,? @
stringA G
responsableH S
)S T
{ 	
Nombre 
= 
nombre 
; 
	Ubicacion 
= 
	ubicacion !
;! "
AreaM2 
= 
areaM2 
; 
Responsable 
= 
responsable %
;% &
} 	
} 
} 